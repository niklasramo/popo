/*! popo.js v1.0.1 nightly | http://github.com/niklasramo/popo | Copyright (c) 2012, 2013 Niklas Rämö | Released under the MIT license | */
(function(j,g){var k="popo",i=j.parseFloat,d=j.Math,r=d.abs,e,y,w,o;function c(z){y=z.ownerDocument;e=y.defaultView||y.parentWindow;w=y.documentElement;o=y.body}function p(A,z){A=({}).toString.call(A).split(" ")[1].replace("]","").toLowerCase();return z?A===z:A}function h(z){return p(z,"string")?(z.trim?z.trim():z.replace(/^\s+|\s+$/g,"")):z}function t(D){var B={},z=D.length,A,C;for(A=0;A<z;A++){for(C in D[A]){if(D[A].hasOwnProperty(C)){B[C]=D[A][C]}}}return B}function x(z){return z.self===e.self}function q(z,A){return e.getComputedStyle?(e.getComputedStyle(z,null).getPropertyValue(A)):z.currentStyle?(z.currentStyle[A]):(null)}function m(z){var A=z.offsetParent,B="style" in z&&q(z,"position");if(B==="fixed"){A=e}else{if(B==="absolute"){A=z===o?w:A||y;while("style" in A&&q(A,"position")==="static"){A=A===o?w:A.offsetParent||y}}}return A}function l(z,A){return x(z)?(w.clientWidth):z===y||z===w?(d.max(w.scrollWidth,o.scrollWidth)):(A=z.getBoundingClientRect&&z.getBoundingClientRect(),A&&"width" in A?A.width:z.offsetWidth)}function b(z,A){return x(z)?(w.clientHeight):z===y||z===w?(d.max(w.scrollHeight,o.scrollHeight)):(A=z.getBoundingClientRect&&z.getBoundingClientRect(),A&&"height" in A?A.height:z.offsetHeight)}function u(A,G){var C=0,z=0,D=e.pageXOffset||w.scrollLeft||o.scrollLeft||0,F=e.pageYOffset||w.scrollTop||o.scrollTop||0,B=A,E;if(x(A)){C=D;z=F}else{if(A!==y&&A!==w){E=A.getBoundingClientRect&&A.getBoundingClientRect();if(E&&"left" in E&&"top" in E){C+=E.left+D-(w.clientLeft||0);z+=E.top+F-(w.clientTop||0)}else{while(B){C+=x(B)?D:B.offsetLeft||0;z+=x(B)?F:B.offsetTop||0;B=m(B)}}if(G){C+=A.clientLeft||0;z+=A.clientTop||0}}}return{left:C,top:z}}function a(B,z){var D=u(B,z),C=[[q(B,"left"),q(B,"right")],[q(B,"top"),q(B,"bottom")]],F=[0,0],A,H,G,E;for(E=0;E<2;E++){H=C[E][0];G=C[E][1];if(H==="auto"&&G==="auto"){continue}if(H==="auto"){F[E]=-parseFloat(G.indexOf("px")>-1?G:B.style[E===0?"pixelRight":"pixelBottom"])}else{F[E]=parseFloat(H.indexOf("px")>-1?H:B.style[E===0?"pixelLeft":"pixelTop"])}}D.left-=F[0];D.top-=F[1];return D}function n(D,C){var A=j[k].defaults,F,B,E,z;C=t(p(C,"object")?[A,C]:[A]);for(F in C){C[F]=h(p(C[F],"function")&&F!=="collision"?C[F](D):C[F]);if(F==="position"){C[F]=C[F].split(" ")}if(F==="offset"){B=p(C[F],"string")?C[F].split(" "):[];C.offsetX=i(B[0])||0;C.offsetY=B.length>1?i(B[1])||0:C.offsetX}if(F==="collision"){B=p(C[F],"function")?C[F]:null;if(p(C[F],"string")&&C[F].length>0){E=C[F].split(" ");z=E.length;if(z>0&&z<5){B={left:E[0],top:z>1?E[1]:E[0],right:z>2?E[2]:E[0],bottom:z>3?E[3]:z<2?E[0]:E[1]}}}C[F]=B}}return C}function s(G,F,D,E,C,B){var z={},A=F+E-D;z.leftleft=z.toptop=A;z.leftcenter=z.topcenter=A+(C/2);z.leftright=z.topbottom=A+C;z.centerleft=z.centertop=A-(B/2);z.centercenter=A+(C/2)-(B/2);z.centerright=z.centerbottom=A+C-(B/2);z.rightleft=z.bottomtop=A-B;z.rightcenter=z.bottomcenter=A-B+(C/2);z.rightright=z.bottombottom=A-B+C;return z[G]}function f(K,L,D){var H=0,I="push",G="push+",A=D?"top":"left",z=D?"bottom":"right",J=K[A],B=K[z],F=L[A],E=L[z],C=F+E;if((J===I||J===G)&&(B===I||B===G)&&(F<0||E<0)){if(F<E){H-=C<0?F+r(C/2):F}if(E<F){H+=C<0?E+r(C/2):E}F+=H;E-=H;if(J===G&&B!=G&&F<0){H-=F}if(B===G&&J!=G&&E<0){H+=E}}else{if((J===G||J===I)&&F<0){H-=F}else{if((B===G||B===I)&&E<0){H+=E}}}return H}function v(B,C,E){c(B);E=n(B,p(C,"string")?E:C);var H=E.collision,I=l(B),J=b(B),D=q(B,"position")==="relative"?a(B,1):u(m(B),1),z=E.base,Q,F,P,A=E.container,N,O,G,R,M,K,L;p(z,"array")?(Q=F=0,P=u(z[2]||e),P.left+=z[0],P.top+=z[1]):(Q=l(z),F=b(z),P=u(z));L={left:s(E.position[0]+E.position[2],P.left,D.left,E.offsetX,Q,I),top:s(E.position[1]+E.position[3],P.top,D.top,E.offsetY,F,J)};if(A){p(A,"array")?(N=O=0,G=u(A[2]||e),G.left+=A[0],G.top+=A[1]):(N=l(A),O=b(A),G=u(A));K={left:L.left+D.left-G.left,right:(G.left+N)-(L.left+D.left+I),top:L.top+D.top-G.top,bottom:(G.top+O)-(L.top+D.top+J)};if(p(H,"function")){R=u(B);M={left:R.left>D.left?r(R.left-D.left):-r(R.left-D.left),top:R.top>D.top?r(R.top-D.top):-r(R.top-D.top)};H(L,K,{target:{element:B,width:I,height:J,offset:R,position:M},base:{element:z,width:Q,height:F,offset:P},container:{element:A,width:N,height:O,offset:G}})}else{if(H){L.left+=f(H,K);L.top+=f(H,K,1)}}}if(C==="get"){return L}else{B.style.left=L.left+"px";B.style.top=L.top+"px";return B}}j[k]=v;j[k].width=function(z){c(z);l(z)};j[k].height=function(z){c(z);b(z)};j[k].offset=function(z,B,A){c(z);A?a(z,B):u(z,B)};j[k].defaults={base:function(z){return z.ownerDocument.defaultView||z.ownerDocument.parentWindow},container:null,position:"center center center center",offset:"0",collision:"none"}})(self);